class Modal{constructor(n){this["#animTime"]=125;this["#text"]=n;this["#stopClickPropagation"]=function(n){n.stopPropagation()};this["#animObjectOut"]={marginTop:"-=20%"};this["#animObjectIn"]={marginTop:"+=20%"}}get text(){return this["#text"]}set text(n){this["#text"]=n}invokeModalWindow(){const n=$(`<div id="modal" class="modal-window">`+`<div class="modal-block">`+`<span id="close" class="button modal-close-button">close</span>`+`<p class="modal-block-text">${this["#text"]}</p>`+`</div>`+`</div>`);n.prependTo("body").fadeIn(this["#animTime"]);const i=this["#animObjectIn"];n.children(".modal-block").animate(i,this["#animTime"]);const t=$("#modal");t.click(this.closeModalWindow.bind(this));t.children(".modal-block").click(this["#stopClickPropagation"]);$("#close").click(this.closeModalWindow.bind(this))}closeModalWindow(n){n.stopPropagation();const t=$("#modal"),r=this["#animObjectOut"],i=this["#animTime"];t.fadeOut(i);t.children(".modal-block").animate(r,i,function(){t.remove()})}}class ContentUploader{constructor(n){this["#file"]=n}uploadContent(n=undefined){const t=this["#file"];if(t.type!=="text/plain"&&t.type!=="text/html")return!1;const i=new FileReader;return i.onload=function(){const t=this.result;n!==undefined&&n(t)},i.readAsText(t,"utf-15"),!0}}$(function(){function i(){if($("#Attachments").length!==1)f();else{const n=new Modal("Attachments is already added to the page");n.invokeModalWindow()}}function r(){if($("div.attachment-group").length===1)$("div.attachment-group").last().parent().slideUp(n,function(){$(this).remove()});else{const n=new Modal("Attachments is not included to the page");n.invokeModalWindow()}}function u(){const n=this.files[0];var t=new ContentUploader(n).uploadContent(e);if(t)$("div.upload-group .file-choosen").text("Now using: "+n.name);else{const n=new Modal("Loaded file must be .txt or .html format!");n.invokeModalWindow()}}function t(){const t=[];for(let n of this.files)t.push(n.name);let n=t.join(", ");n.length>15&&(n=n.substring(0,15)+"...");$(this).siblings(".file-choosen").text(n.length>0?n:"<unknown file>")}function f(){const i=$(`<div class="form-section">
                                   <h3 class="form-section-label">Attachments</h3>
                                    <div class="form-group attachment-group">
                                        <label class="upload-button" for="Attachments">
                                            Upload attachments
                                        </label>
                                        <p class="file-choosen">File is not choosen</p>
                                        <input hidden="" multiple="" type="file"
                                            data-val="true" data-val-required="The Attachments field is required."
                                            id="Attachments" name="Attachments">
                                    </div>
                               </div>`);i.slideUp(function(){$(".buttons-section").before(i)});i.find("#Attachments").change(t);i.slideDown(n)}function e(n){$("#Content").val(n)}const n=150;$("#RemoveAttachmentButton").click(r);$("#AddAttachmentButton").click(i);$("#Attachments").change(t);$("#UploadContent").change(u)});